"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1087],{70023:function(e,t,n){var i=n(11527),o=n(9297),s=n(32652),r=n(30952),a=n.n(r),c=n(50959);const l=a()((()=>n.e(4158).then(n.bind(n,24158))),{loadableGenerated:{webpack:()=>[24158]}}),d=e=>{let{id:t,useHook:n,StyledComponent:r,children:a}=e;const{processes:{[t]:{url:d=""}={}}}=(0,s.z)(),u=(0,c.useRef)(null),[h,p]=(0,c.useState)(!0),f=(0,c.useMemo)((()=>({contain:"strict",visibility:h?"hidden":"visible"})),[h]);return n({containerRef:u,id:t,loading:h,setLoading:p,url:d}),(0,i.jsxs)(i.Fragment,{children:[h&&(0,i.jsx)(l,{}),(0,i.jsx)(r,{ref:u,style:f,...(0,o.Z)({id:t}),children:a})]})};t.Z=(0,c.memo)(d)},21087:function(e,t,n){n.r(t),n.d(t,{default:function(){return F}});var i=n(11527),o=n(70023);var s=n(6444).ZP.div.withConfig({componentId:"sc-d19956e2-0"})`
  align-items: center;
  background-color: #000;
  display: flex;
  height: 100%;
  width: 100%;

  canvas {
    image-rendering: pixelated;
    image-rendering: crisp-edges;
    position: absolute;
    top: 0 !important;
    touch-action: none;
    -webkit-touch-callout: none;
    user-select: none;
    width: 100%;
  }

  div,
  video {
    display: none;
  }

  .emulator-mouse-overlay {
    display: block;
    inset: 0;
    position: absolute;
  }
`;const r={emulatorFunction:"dosWorker"},a=["__core-js_shared__","compiled","core","emulatorsUi","exports","WDOSBOX","worker"],c={".jsdos/dosbox.conf":"/Program Files/js-dos/dosbox.conf",".jsdos/jsdos.json":"/Program Files/js-dos/jsdos.json"},l=new Set(["Alt","ContextMenu","F1","F3","F5","F6","F7","F10","F11","F12"]);var d=n(7217),u=n(31266),h=n(32652),p=n(735),f=n(50959),w=n(71059),m=n(46429),g=n(51844),b=n(55872).Buffer;var x=(e,t,i,o)=>{const{appendFileToTitle:s}=(0,d.Z)(e),{exists:r,mkdirRecursive:l,readFile:x,updateFolder:y,writeFile:v}=(0,u.o)(),{linkElement:k,processes:{[e]:T}}=(0,h.z)(),{closing:F}=T||{},[E,z]=(0,f.useState)({}),L=(0,f.useCallback)((async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=`${(0,p.basename)(e)}.zip.save`;await r(w.Tl)||(await l(w.Tl),y((0,p.dirname)(w.Tl)));const s=(0,p.join)(w.Tl,i);if(void 0!==E[e]&&await v(s,b.from(await E[e].persist()),!0)){if(t){const e=(0,p.join)(w.Xo,w.Tl),n=(0,p.join)(w.Xo,`${s}${w.Qy}`);await r(e)||(await l(e),y((0,p.dirname)(w.Tl))),await v(n,t,!0)}n&&o?.stop(),y(w.Tl,i)}}),[E,o,r,l,y,v]),$=(0,f.useCallback)((async()=>{const[l]=Object.keys(E);l&&L(l);const d=t?await x(t):b.from(""),u=(0,m.RT)(t),{zipAsync:h}=await n.e(5598).then(n.bind(n,85598)),f=async e=>b.from(await h({[(0,p.basename)(t)]:e})),y=async e=>(0,m.YS)(await(async(e,t)=>{const{addFileToZip:i,isFileInZip:o}=await n.e(5598).then(n.bind(n,85598));return Object.entries(c).reduce((async(e,n)=>{let[s,r]=n;const a=await e;return a.length>0&&await o(a,s)?a:i(a,r,s,t)}),Promise.resolve(e))})(e,x)),v=".exe"===u?await f(d):d;let T;if(".jsdos"===u)T=(0,m.YS)(v);else try{T=await y(v)}catch{T=await y(await f(d))}const F=(0,p.join)(w.Tl,`${(0,p.basename)(t)}.zip.save`),$=await r(F)?(0,m.YS)(await x(F)):void 0,j=await(o?.run(T,$));if(j){const n=i.current?.querySelector("canvas");n instanceof HTMLCanvasElement&&(k(e,"peekElement",n),z({[t]:j}),s((0,p.basename)(t)),(0,m.EK)(T),$&&(0,m.EK)($),(0,g.od)(a))}}),[s,L,i,E,o,r,e,k,x,t]);return(0,f.useEffect)((()=>(T&&!F&&o&&!(t in E)&&(z({[t]:void 0}),$()),()=>{if(t&&F){const e=e=>{window.setTimeout((()=>L(t,e,F)),w.jx.WINDOW)};(async()=>{const e=await(E[t]?.screenshot());return e?(0,m.fv)(e):void 0})().then(e).catch(e)}})),[L,F,E,o,$,T,t]),E[t]},y=n(31621),v=n(64037);const k=e=>{l.has(e.key)&&e.preventDefault()};var T=e=>{let{containerRef:t,id:n,loading:i,setLoading:o,url:s}=e;const{updateWindowSize:a}=(0,y.Z)(n),[c,l]=(0,f.useState)(),d=(0,f.useRef)(!1),{foregroundId:u}=(0,v.k)(),p=x(n,s,t,c),{closeWithTransition:g,processes:{[n]:{libs:b=[]}={}}={}}=(0,h.z)();(0,f.useEffect)((()=>{c||d.current||(d.current=!0,(0,m.mb)(b).then((()=>{if(window.emulators&&(window.emulators.pathPrefix="/Program Files/js-dos/",t.current)){const e=t.current.closest("section");e?.addEventListener("keydown",k,{capture:!0}),e?.addEventListener("keyup",k,{capture:!0}),e?.addEventListener("focus",(()=>t.current?.focus(w.eS)),{passive:!0}),l(window.Dos(t.current,r))}})))}),[t,c,b]),(0,f.useEffect)((()=>{if(p&&i){a(p.height(),p.width());const e=p.events();e.onMessage(((e,t)=>{if(t.startsWith("[LOG_EXEC]")){const[,e]=t.split("[LOG_EXEC]"),[i]=e.replace("Parsing command line: ","").split(" ");"EXIT"===i.toUpperCase()&&g(n)}})),e.onFrameSize((()=>{const e=t.current?.querySelector("canvas"),[n,i]=[(0,m.Vy)(e?.style.width),(0,m.Vy)(e?.style.height)],{height:o=0,width:s=0}=e?.getBoundingClientRect()||{};i&&n&&(i!==o||n!==s)&&a(i,n)})),e.onExit((()=>window.SimpleKeyboardInstances?.emulatorKeyboard?.destroy())),o(!1)}}),[g,t,p,c?.layers,n,i,o,a]),(0,f.useLayoutEffect)((()=>{n!==u||i||t.current?.focus(w.eS)}),[t,i,u,n])};var F=e=>{let{id:t}=e;return(0,i.jsx)(o.Z,{StyledComponent:s,id:t,useHook:T})}},9297:function(e,t,n){var i=n(32026),o=n(62358),s=n(34917),r=n(31266),a=n(32652),c=n(64037),l=n(735),d=n(50959),u=n(71059),h=n(46429);t.Z=e=>{let{callback:t,directory:n=u.Ll,id:p,onDragLeave:f,onDragOver:w,updatePositions:m}=e;const{url:g}=(0,a.z)(),{iconPositions:b,sortOrders:x,setIconPositions:y}=(0,c.k)(),{mkdirRecursive:v,updateFolder:k,writeFile:T}=(0,r.o)(),F=(0,d.useCallback)((async(e,t,n)=>{if(p)if(t){const i=(0,l.join)(u.Ll,e);await v(u.Ll),await T(i,t,!0)&&(n===s.v.UPDATE_URL&&g(p,i),k(u.Ll,e))}else n===s.v.UPDATE_URL&&g(p,e)}),[p,v,k,g,T]),{openTransferDialog:E}=(0,i.Z)();return{onDragLeave:f,onDragOver:e=>{w?.(e),(0,h.nK)(e)},onDrop:e=>{if(!u.my.has((0,h.RT)(n))){if(m&&e.target instanceof HTMLElement){const{files:t,text:i}=(0,o.p4)(e);if(0===t.length&&""===i)return;const s={x:e.clientX,y:e.clientY};let r=[];if(i){try{r=JSON.parse(i)}catch{}if(!Array.isArray(r))return;const[e]=r;if(!e)return;if(e.startsWith(n)&&(0,l.basename)(e)===(0,l.relative)(n,e))return;r=r.map((e=>(0,l.basename)(e)))}else r=t instanceof FileList?[...t].map((e=>e.name)):[...t].map((e=>e.getAsFile()?.name||"")).filter(Boolean);r=r.map((e=>{if(!b[`${n}/${e}`])return e;let t=0,i="";do{t+=1,i=`${n}/${(0,l.basename)(e,(0,l.extname)(e))} (${t})${(0,l.extname)(e)}`}while(b[i]);return(0,l.basename)(i)})),(0,h.vi)(n,e.target,b,x,s,r,y)}(0,o.WG)(e,t||F,n,E,Boolean(p))}}}}},39865:function(e,t,n){n.d(t,{BS:function(){return r},FC:function(){return o},F_:function(){return i},wV:function(){return s}});const i={bottom:!1,bottomLeft:!1,bottomRight:!1,left:!1,right:!1,top:!1,topLeft:!1,topRight:!1},o={bottom:!0,bottomLeft:!0,bottomRight:!0,left:!0,right:!0,top:!0,topLeft:!0,topRight:!0},s=30,r=166,a={cancel:".cancel",dragHandleClassName:"handle",enableUserSelectHack:!1,minHeight:`${s}px`,minWidth:`${r}px`,resizeHandleStyles:{bottom:{bottom:"-3px",cursor:"ns-resize",height:"6px"},bottomLeft:{bottom:"-3px",cursor:"nesw-resize",height:"12px",left:"-3px",width:"12px"},bottomRight:{bottom:"-3px",cursor:"nwse-resize",height:"12px",right:"-3px",width:"12px"},left:{cursor:"ew-resize",left:"-3px",width:"6px"},right:{cursor:"ew-resize",right:"-3px",width:"6px"},top:{cursor:"ns-resize",height:"6px",top:"-3px"},topLeft:{cursor:"nwse-resize",height:"12px",left:"-3px",top:"-3px",width:"12px"},topRight:{cursor:"nesw-resize",height:"12px",right:"-3px",top:"-3px",width:"12px"}}};t.ZP=a},57012:function(e,t,n){n.d(t,{Rf:function(){return a},b$:function(){return d},hu:function(){return r},ix:function(){return l},mZ:function(){return c}});var i=n(39865),o=n(71059),s=n(46429);const r=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const[r]=e.split(o.CC),a=`${r}${o.CC}`,c=n.find((e=>e.startsWith(a)))||"",{componentWindow:l}=t?.[c]||{},{x:d=0,y:u=0,width:h=0,height:p=0}=l?.getBoundingClientRect()||{},f=d+i+h>(0,s.E9)()||u+i+p>(0,s.sI)();return f||!d&&!u?void 0:{x:d+i,y:u+i}},a=e=>{let{height:t,width:n}=e;const[i,r]=[(0,s.sI)(),(0,s.E9)()];return{x:Math.floor(r/2-(0,s.Vy)(n)/2),y:Math.floor((i-o.bK)/2-(0,s.Vy)(t)/2)}},c={BOTTOM:15,LEFT:150,RIGHT:50,TOP:15},l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{position:i,size:o}=e||{},{x:r=0,y:a=0}=i||{},{height:l=0,width:d=0}=o||{};return n?r+c.RIGHT>t.x||r+(0,s.Vy)(d)-c.LEFT<0||a+c.BOTTOM>t.y||a+c.TOP<0:r<0||a<0||r+(0,s.Vy)(d)>t.x||a+(0,s.Vy)(l)>t.y},d=(e,t)=>{const n=Number(e.height),r=Number(e.width),[a,c]=[(0,s.sI)(),(0,s.E9)()],l=a-o.bK,d=Math.max(i.wV,Math.min(n,l)),u=Math.max(i.BS,Math.min(r,c));if(!t)return{height:d,width:u};const h=n===d,p=r===u;return h||p?h?p?{height:d,width:u}:{height:Math.round(d/(r/u)),width:u}:{height:d,width:Math.round(u/(n/d))}:n>r?{height:d,width:Math.round(u/(l/d))}:{height:Math.round(d/(c/u)),width:u}}},7217:function(e,t,n){var i=n(32652),o=n(81030),s=n(50959),r=n(71059);t.Z=e=>{const{title:t}=(0,i.z)(),[n]=e.split(r.CC),{title:a}=o.Z[n]||{};return{appendFileToTitle:(0,s.useCallback)(((n,i)=>{const o=n?` - ${n}${i?` ${r.xy}`:""}`:"";t(e,`${a}${o}`)}),[e,a,t]),prependFileToTitle:(0,s.useCallback)(((n,i,o)=>{const s=n?`${i?`${r.xy} `:""}${n}${o?" ":" - "}`:"";t(e,`${s}${a}`)}),[e,a,t])}}},31621:function(e,t,n){var i=n(57012),o=n(32652),s=n(64037),r=n(50959),a=n(6444);t.Z=e=>{const{setWindowStates:t}=(0,s.k)(),{processes:{[e]:{lockAspectRatio:n=!1,maximized:c=!1}={}}={}}=(0,o.z)(),{sizes:{titleBar:l}}=(0,a.Fg)();return{updateWindowSize:(0,r.useCallback)(((o,s)=>t((t=>({...t,[e]:{...t?.[e],maximized:c,size:(0,i.b$)({height:o+l.height,width:s},n)}})))),[e,n,c,t,l.height])}}},51844:function(e,t,n){n.d(t,{H3:function(){return r},od:function(){return i},wz:function(){return s}});const i=e=>e.forEach((e=>{if(e in window)try{delete window[e]}finally{Object.assign(window,{[e]:void 0})}})),o=(e,t)=>{window.lockedGlobals={...window.lockedGlobals,[e]:t}},s=e=>o(e,!0),r=e=>{Object.getOwnPropertyDescriptor(window,e)||(e=>{let t;Object.defineProperty(window,e,{get:()=>window.lockedGlobals?.[e]?void 0:t,set(n){window.lockedGlobals?.[e]||(t=n)}})})(e),o(e,!1)}}}]);